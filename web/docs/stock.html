<!DOCTYPE html>

<html>
<head>
  <title>dc.js Getting Started and How-To Guide</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1>dc.js Getting Started and How-To Guide</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="string">'use strict'</span>;

<span class="comment">/* jshint globalstrict: true */</span>
<span class="comment">/* global dc,d3,crossfilter */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h3>Create Chart Objects</h3>
<p>Create chart objects assocated with the container elements identified by the css selector.
Note: It is often a good idea to have these objects accessible at the global scope so that they can be modified or filtered by other page controls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> gainOrLossChart = dc.pieChart(<span class="string">"#gain-loss-chart"</span>);
<span class="keyword">var</span> fluctuationChart = dc.barChart(<span class="string">"#fluctuation-chart"</span>);
<span class="keyword">var</span> quarterChart = dc.pieChart(<span class="string">"#quarter-chart"</span>);
<span class="keyword">var</span> dayOfWeekChart = dc.rowChart(<span class="string">"#day-of-week-chart"</span>);
<span class="keyword">var</span> moveChart = dc.lineChart(<span class="string">"#monthly-move-chart"</span>);
<span class="keyword">var</span> volumeChart = dc.barChart(<span class="string">"#monthly-volume-chart"</span>);
<span class="keyword">var</span> yearlyBubbleChart = dc.bubbleChart(<span class="string">"#yearly-bubble-chart"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h3>Anchor Div for Charts</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/*</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>A div anchor that can be identified by id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    &lt;div id=<span class="string">"your-chart"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Title or anything you want to add above the chart</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    &lt;div id=<span class="string">"chart"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="title">span</span>&gt;</span>Days by Gain or Loss<span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap for-h4">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h4>.turnOnControls()</h4>
<p>If a link with css class “reset” is present then the chart
will automatically turn it on/off based on whether there is filter
set on this chart (slice selection for pie chart and brush
selection for bar chart)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>     &lt;div id=<span class="string">"chart"</span>&gt;
       <span class="xml"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">class</span>=<span class="value">"reset"</span> <span class="attribute">href</span>=<span class="value">"javascript:myChart.filterAll();dc.redrawAll();"</span> <span class="attribute">style</span>=<span class="value">"display: none;"</span>&gt;</span>reset<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>dc.js will also automatically inject applied current filter value into
any html element with css class set to “filter”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    &lt;div id=<span class="string">"chart"</span>&gt;
        <span class="xml"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"reset"</span> <span class="attribute">style</span>=<span class="value">"display: none;"</span>&gt;</span>Current filter: <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"filter"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
*/

</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h3>Load your data</h3>
<p>Data can be loaded through regular means with your
favorite javascript library</p>
<pre><code class="lang-javascript">d3.csv(<span class="string">"data.csv"</span>, <span class="keyword">function</span>(data) {...};
d3.json(<span class="string">"data.json"</span>, <span class="keyword">function</span>(data) {...};
jQuery.getJson(<span class="string">"data.json"</span>, <span class="keyword">function</span>(data){...});</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>d3.csv(<span class="string">"ndx.csv"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
            <span class="comment">/* since its a csv file we need to format the data a bit */</span>
            <span class="keyword">var</span> dateFormat = d3.time.format(<span class="string">"%m/%d/%Y"</span>);
            <span class="keyword">var</span> numberFormat = d3.format(<span class="string">".2f"</span>);

            data.forEach(<span class="function"><span class="keyword">function</span> <span class="params">(e)</span> {</span>
                e.dd = dateFormat.parse(e.date);
                e.month = d3.time.month(e.dd); <span class="comment">// pre-calculate month for better performance</span>
            });</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h3>Create Crossfilter Dimensions and Groups</h3>
<p>See the <a href="https://github.com/square/crossfilter/wiki/API-Reference">crossfilter API</a> for reference.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">var</span> ndx = crossfilter(data);
            <span class="keyword">var</span> all = ndx.groupAll();

            <span class="keyword">var</span> yearlyDimension = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> d3.time.year(d.dd).getFullYear();
            });
            <span class="keyword">var</span> yearlyPerformanceGroup = yearlyDimension.group().reduce(
                    <span class="comment">/* callback for when data is added to the current filter results */</span>
                    <span class="function"><span class="keyword">function</span> <span class="params">(p, v)</span> {</span>
                        ++p.count;
                        p.absGain += +v.close - +v.open;
                        p.fluctuation += Math.abs(+v.close - +v.open);
                        p.sumIndex += (+v.open + +v.close) / <span class="number">2</span>;
                        p.avgIndex = p.sumIndex / p.count;
                        p.percentageGain = (p.absGain / p.avgIndex) * <span class="number">100</span>;
                        p.fluctuationPercentage = (p.fluctuation / p.avgIndex) * <span class="number">100</span>;
                        <span class="keyword">return</span> p;
                    },
                    <span class="comment">/* callback for when data is removed from the current filter results */</span>
                    <span class="function"><span class="keyword">function</span> <span class="params">(p, v)</span> {</span>
                        --p.count;
                        p.absGain -= +v.close - +v.open;
                        p.fluctuation -= Math.abs(+v.close - +v.open);
                        p.sumIndex -= (+v.open + +v.close) / <span class="number">2</span>;
                        p.avgIndex = p.sumIndex / p.count;
                        p.percentageGain = (p.absGain / p.avgIndex) * <span class="number">100</span>;
                        p.fluctuationPercentage = (p.fluctuation / p.avgIndex) * <span class="number">100</span>;
                        <span class="keyword">return</span> p;
                    },
                    <span class="comment">/* initialize p */</span>
                    <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                        <span class="keyword">return</span> {count: <span class="number">0</span>, absGain: <span class="number">0</span>, fluctuation: <span class="number">0</span>, fluctuationPercentage: <span class="number">0</span>, sumIndex: <span class="number">0</span>, avgIndex: <span class="number">0</span>, percentageGain: <span class="number">0</span>};
                    }
            );

            <span class="keyword">var</span> dateDimension = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> d.dd;
            });

            <span class="comment">/* monthly index avg fluctuation in percentage */</span>
            <span class="keyword">var</span> moveMonths = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> d.month;
            });
            <span class="keyword">var</span> monthlyMoveGroup = moveMonths.group().reduceSum(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> Math.abs(+d.close - +d.open);
            });
            <span class="keyword">var</span> volumeByMonthGroup = moveMonths.group().reduceSum(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> d.volume / <span class="number">500000</span>;
            });
            <span class="keyword">var</span> indexAvgByMonthGroup = moveMonths.group().reduce(
                    <span class="function"><span class="keyword">function</span> <span class="params">(p, v)</span> {</span>
                        ++p.days;
                        p.total += (+v.open + +v.close) / <span class="number">2</span>;
                        p.avg = Math.round(p.total / p.days);
                        <span class="keyword">return</span> p;
                    },
                    <span class="function"><span class="keyword">function</span> <span class="params">(p, v)</span> {</span>
                        --p.days;
                        p.total -= (+v.open + +v.close) / <span class="number">2</span>;
                        p.avg = (p.days == <span class="number">0</span>) ? <span class="number">0</span> : Math.round(p.total / p.days);
                        <span class="keyword">return</span> p;
                    },
                    <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                        <span class="keyword">return</span> {days: <span class="number">0</span>, total: <span class="number">0</span>, avg: <span class="number">0</span>};
                    }
            );

            <span class="keyword">var</span> gainOrLoss = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> +d.open &gt; +d.close ? <span class="string">"Loss"</span> : <span class="string">"Gain"</span>;
            });
            <span class="keyword">var</span> gainOrLossGroup = gainOrLoss.group();

            <span class="keyword">var</span> fluctuation = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> Math.round((d.close - d.open) / d.open * <span class="number">100</span>);
            });
            <span class="keyword">var</span> fluctuationGroup = fluctuation.group();

            <span class="keyword">var</span> quarter = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">var</span> month = d.dd.getMonth();
                <span class="keyword">if</span> (month &lt;= <span class="number">2</span>)
                    <span class="keyword">return</span> <span class="string">"Q1"</span>;
                <span class="keyword">else</span> <span class="keyword">if</span> (month &gt; <span class="number">3</span> &amp;&amp; month &lt;= <span class="number">5</span>)
                    <span class="keyword">return</span> <span class="string">"Q2"</span>;
                <span class="keyword">else</span> <span class="keyword">if</span> (month &gt; <span class="number">5</span> &amp;&amp; month &lt;= <span class="number">8</span>)
                    <span class="keyword">return</span> <span class="string">"Q3"</span>;
                <span class="keyword">else</span>
                    <span class="keyword">return</span> <span class="string">"Q4"</span>;
            });
            <span class="keyword">var</span> quarterGroup = quarter.group().reduceSum(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">return</span> d.volume;
            });

            <span class="keyword">var</span> dayOfWeek = ndx.dimension(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                <span class="keyword">var</span> day = d.dd.getDay();
                <span class="keyword">var</span> name=[<span class="string">"Sun"</span>,<span class="string">"Mon"</span>,<span class="string">"Tue"</span>,<span class="string">"Wed"</span>,<span class="string">"Thu"</span>,<span class="string">"Fri"</span>,<span class="string">"Sat"</span>];
                <span class="keyword">return</span> day+<span class="string">"."</span>+name[day];
             });
            <span class="keyword">var</span> dayOfWeekGroup = dayOfWeek.group();</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h3>Define Chart Attributes</h3>
<p>Define chart attributes using fluent methods. See the <a href="https://github.com/NickQiZhu/dc.js/blob/master/web/docs/api-1.7.0.md">dc API Reference</a> for more information</p>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap for-h4">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h4>Bubble Chart</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre>            yearlyBubbleChart.width(<span class="number">990</span>)
                    .height(<span class="number">250</span>)
                    .margins({top: <span class="number">10</span>, right: <span class="number">50</span>, bottom: <span class="number">30</span>, left: <span class="number">40</span>})
                    .dimension(yearlyDimension)
                    .group(yearlyPerformanceGroup)
                    .transitionDuration(<span class="number">1500</span>)
                    .colors(colorbrewer.RdYlGn[<span class="number">9</span>])
                    .colorDomain([-<span class="number">500</span>, <span class="number">500</span>])
                    .colorAccessor(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                        <span class="keyword">return</span> d.value.absGain;
                    })
                    .keyAccessor(<span class="function"><span class="keyword">function</span> <span class="params">(p)</span> {</span>
                        <span class="keyword">return</span> p.value.absGain;
                    })
                    .valueAccessor(<span class="function"><span class="keyword">function</span> <span class="params">(p)</span> {</span>
                        <span class="keyword">return</span> p.value.percentageGain;
                    })
                    .radiusValueAccessor(<span class="function"><span class="keyword">function</span> <span class="params">(p)</span> {</span>
                        <span class="keyword">return</span> p.value.fluctuationPercentage;
                    })
                    .maxBubbleRelativeSize(<span class="number">0.3</span>)
                    .x(d3.scale.linear().domain([-<span class="number">2500</span>, <span class="number">2500</span>]))
                    .y(d3.scale.linear().domain([-<span class="number">100</span>, <span class="number">100</span>]))
                    .r(d3.scale.linear().domain([<span class="number">0</span>, <span class="number">4000</span>]))
                    .elasticY(<span class="literal">true</span>)
                    .yAxisPadding(<span class="number">100</span>)
                    .elasticX(<span class="literal">true</span>)
                    .xAxisPadding(<span class="number">500</span>)
                    .renderHorizontalGridLines(<span class="literal">true</span>)
                    .renderVerticalGridLines(<span class="literal">true</span>)
                    .renderLabel(<span class="literal">true</span>)
                    .renderTitle(<span class="literal">true</span>)
                    .xAxisLabel(<span class="string">'Index Gain'</span>)
                    .yAxisLabel(<span class="string">'Index Gain %'</span>)
                    .label(<span class="function"><span class="keyword">function</span> <span class="params">(p)</span> {</span>
                        <span class="keyword">return</span> p.key;
                    })
                    .title(<span class="function"><span class="keyword">function</span> <span class="params">(p)</span> {</span>
                        <span class="keyword">return</span> p.key
                                + <span class="string">"\n"</span>
                                + <span class="string">"Index Gain: "</span> + numberFormat(p.value.absGain) + <span class="string">"\n"</span>
                                + <span class="string">"Index Gain in Percentage: "</span> + numberFormat(p.value.percentageGain) + <span class="string">"%\n"</span>
                                + <span class="string">"Fluctuation / Index Ratio: "</span> + numberFormat(p.value.fluctuationPercentage) + <span class="string">"%"</span>;
                    })
                    .yAxis().tickFormat(<span class="function"><span class="keyword">function</span> <span class="params">(v)</span> {</span>
                        <span class="keyword">return</span> v + <span class="string">"%"</span>;
                    });</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap for-h4">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h4>Pie/Donut Chart</h4>
<p>Create a pie chart and use the given css selector as anchor. You can also specify
an optional chart group for this chart to be scoped within. When a chart belongs
to a specific group then any interaction with such chart will only trigger redraw
on other charts within the same chart group.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            gainOrLossChart
                    .width(<span class="number">180</span>) <span class="comment">// (optional) define chart width, :default = 200</span>
                    .height(<span class="number">180</span>) <span class="comment">// (optional) define chart height, :default = 200</span>
                    .radius(<span class="number">80</span>) <span class="comment">// define pie radius</span>
                    .dimension(gainOrLoss) <span class="comment">// set dimension</span>
                    .group(gainOrLossGroup) <span class="comment">// set group</span>
                    <span class="comment">/* (optional) by default pie chart will use group.key as it's label
                     * but you can overwrite it with a closure */</span>
                    .label(<span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span>
                        <span class="keyword">if</span> (gainOrLossChart.hasFilter() &amp;&amp; !gainOrLossChart.hasFilter(d.key))
                            <span class="keyword">return</span> d.key + <span class="string">"(0%)"</span>;
                        <span class="keyword">return</span> d.key + <span class="string">"("</span> + Math.floor(d.value / all.value() * <span class="number">100</span>) + <span class="string">"%)"</span>;
                    }) <span class="comment">/*</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>(optional) whether chart should render labels, :default = true</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    .renderLabel(<span class="literal">true</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>(optional) if inner radius is used then a donut chart will be generated instead of pie chart</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    .innerRadius(<span class="number">40</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>(optional) define chart transition duration, :default = 350</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    .transitionDuration(<span class="number">500</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>(optional) define color array for slices</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    .colors([<span class="string">'#3182bd'</span>, <span class="string">'#6baed6'</span>, <span class="string">'#9ecae1'</span>, <span class="string">'#c6dbef'</span>, <span class="string">'#dadaeb'</span>])</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>(optional) define color domain to match your data domain if you want to bind data or color</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    .colorDomain([-<span class="number">1750</span>, <span class="number">1644</span>])</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>(optional) define color value accessor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    .colorAccessor(function(d, i){return d.value;})
                    */;

            quarterChart.width(180)
                    .height(180)
                    .radius(80)
                    .innerRadius(30)
                    .dimension(quarter)
                    .group(quarterGroup);

            dayOfWeekChart.width(180)
                    .height(180)
                    .margins({top: 20, left: 10, right: 10, bottom: 20})
                    .group(dayOfWeekGroup)
                    .dimension(dayOfWeek)
                    .ordinalColors(['#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#dadaeb'])
                    .label(function (d) {
                        return d.key.split(".")[1];
                    })
                    .title(function (d) {
                        return d.value;
                    })
                    .elasticX(true)
                    .xAxis().ticks(4);

            fluctuationChart.width(420)
                    .height(180)
                    .margins({top: 10, right: 50, bottom: 30, left: 40})
                    .dimension(fluctuation)
                    .group(fluctuationGroup)
                    .elasticY(true)
                    .centerBar(true)
                    .gap(1)
                    .round(dc.round.floor)
                    .x(d3.scale.linear().domain([-25, 25]))
                    .renderHorizontalGridLines(true)
                    .filterPrinter(function (filters) {
                        var filter = filters[0], s = "";
                        s += numberFormat(filter[0]) + "% -&gt; " + numberFormat(filter[1]) + "%";
                        return s;
                    })
                    .xAxis()
                    .tickFormat(function (v) {
                        return v + "%";
                    });

            fluctuationChart.yAxis().ticks(5);

            moveChart.width(990)
                    .height(200)
                    .transitionDuration(1000)
                    .margins({top: 30, right: 50, bottom: 25, left: 40})
                    .dimension(moveMonths)
                    .mouseZoomable(true)
                    .x(d3.time.scale().domain([new Date(1985, 0, 1), new Date(2012, 11, 31)]))
                    .round(d3.time.month.round)
                    .xUnits(d3.time.months)
                    .elasticY(true)
                    .renderHorizontalGridLines(true)
                    .legend(dc.legend().x(800).y(10).itemHeight(13).gap(5))
                    .brushOn(false)
                    .rangeChart(volumeChart)
                    .group(indexAvgByMonthGroup, "Monthly Index Average")
                    .valueAccessor(function (d) {
                        return d.value.avg;
                    })
                    .renderArea(true)
                    .stack(monthlyMoveGroup, "Monthly Index Move", function (d) {
                        return d.value;
                    })
                    .title(function (d) {
                        var value = d.value.avg ? d.value.avg : d.value;
                        if (isNaN(value)) value = 0;
                        return dateFormat(d.key) + "\n" + numberFormat(value);
                    });

            volumeChart.width(990)
                    .height(40)
                    .margins({top: 0, right: 50, bottom: 20, left: 40})
                    .dimension(moveMonths)
                    .group(volumeByMonthGroup)
                    .centerBar(true)
                    .gap(1)
                    .x(d3.time.scale().domain([new Date(1985, 0, 1), new Date(2012, 11, 31)]))
                    .round(d3.time.month.round)
                    .xUnits(d3.time.months);

            dc.dataCount(".dc-data-count")
                    .dimension(ndx)
                    .group(all);

            dc.dataTable(".dc-data-table")
                    .dimension(dateDimension)
                    .group(function (d) {
                        var format = d3.format("02d");
                        return d.dd.getFullYear() + "/" + format((d.dd.getMonth() + 1));
                    })
                    .size(10)
                    .columns([
                        function (d) {
                            return d.date;
                        },
                        function (d) {
                            return d.open;
                        },
                        function (d) {
                            return d.close;
                        },
                        function (d) {
                            return numberFormat(d.close - d.open);
                        },
                        function (d) {
                            return d.volume;
                        }
                    ])
                    .sortBy(function (d) {
                        return d.dd;
                    })
                    .order(d3.ascending)
                    .renderlet(function (table) {
                        table.selectAll(".dc-table-group").classed("info", true);
                    });

            dc.renderAll();
        }
);</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Determine the current version of dc with <code>dc.version</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>d3.selectAll(<span class="string">"#version"</span>).text(dc.version);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
